<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MXLDJ1ET9K"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-MXLDJ1ET9K');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Product</title>
    <style>
      :root {
        color-scheme: dark;
        --bg-start: 4%;
        --bg-end: 16%;
        --text-color: #f8f3ef;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: system-ui, -apple-system, sans-serif;
        background: linear-gradient(180deg, hsl(0 0% var(--bg-start)) 0%, hsl(0 0% calc(var(--bg-start) + 6%)) 40%, hsl(0 0% calc(var(--bg-end) - 6%)) 70%, hsl(0 0% var(--bg-end)) 100%);
        color: var(--text-color, #f8f3ef);
      }

      .page {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 24px 80px;
      }

      .page-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 40px;
      }

      .brand {
        font-family: "Ballet", "Great Vibes", cursive;
        font-size: 32px;
        letter-spacing: 0.04em;
        color: inherit;
        text-decoration: none;
      }

      .back-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 34px;
        height: 34px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: transparent;
        color: var(--text-color, #f8f3ef);
        cursor: pointer;
        transition: transform 0.2s ease, background 0.2s ease;
      }

      .back-button:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.08);
      }

      .lang {
        display: flex;
        gap: 8px;
      }

      .lang button {
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: transparent;
        color: var(--text-color, #f8f3ef);
        font-size: 12px;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        cursor: pointer;
      }

      .lang button.active {
        background: rgba(255, 255, 255, 0.12);
      }

      .product {
        display: grid;
        grid-template-columns: 1.1fr 0.9fr;
        gap: 36px;
        align-items: start;
      }

      .gallery {
        position: relative;
        border-radius: 18px;
        overflow: hidden;
        background: linear-gradient(135deg, #1a1a1a, #111);
        aspect-ratio: 1 / 1;
      }

      .gallery img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .gallery-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 36px;
        height: 36px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(0, 0, 0, 0.35);
        color: var(--text-color, #f8f3ef);
        cursor: pointer;
      }

      .gallery-arrow.left {
        left: 12px;
      }

      .gallery-arrow.right {
        right: 12px;
      }

      .title {
        margin: 0 0 10px;
        font-size: 28px;
        letter-spacing: 0.16em;
        text-transform: uppercase;
      }

      .price {
        opacity: 0.7;
        margin-bottom: 10px;
      }

      .color {
        letter-spacing: 0.12em;
        text-transform: uppercase;
        font-size: 12px;
        opacity: 0.7;
        margin-bottom: 18px;
      }

      .sizes {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .size {
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: transparent;
        color: var(--text-color, #f8f3ef);
        cursor: pointer;
        font-size: 12px;
        letter-spacing: 0.14em;
        text-transform: uppercase;
      }

      .size.active {
        background: rgba(255, 255, 255, 0.12);
      }

      .size.disabled {
        opacity: 0.3;
        text-decoration: line-through;
        cursor: not-allowed;
      }

      .actions {
        display: flex;
        gap: 12px;
        margin-bottom: 24px;
      }

      .add {
        padding: 10px 18px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(255, 255, 255, 0.08);
        color: var(--text-color, #f8f3ef);
        letter-spacing: 0.18em;
        text-transform: uppercase;
        cursor: pointer;
        opacity: 0.5;
      }

      .add.enabled {
        opacity: 1;
      }

      .wish {
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: transparent;
        color: var(--text-color, #f8f3ef);
        border-radius: 999px;
        width: 40px;
        height: 40px;
        cursor: pointer;
        display: grid;
        place-items: center;
      }

      .wish img {
        width: 20px;
        height: 20px;
        display: block;
      }

      .accordion {
        border-top: 1px solid rgba(255, 255, 255, 0.12);
        margin-top: 12px;
      }

      .accordion-item {
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
      }

      .accordion-toggle {
        width: 100%;
        background: none;
        border: none;
        color: inherit;
        text-align: left;
        padding: 14px 0;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        font-size: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      .accordion-content {
        max-height: 0;
        overflow: hidden;
        opacity: 0;
        transition: max-height 0.3s ease, opacity 0.3s ease;
        font-size: 14px;
        line-height: 1.6;
        padding-right: 8px;
      }

      .accordion-item.open .accordion-content {
        max-height: 200px;
        opacity: 0.8;
        padding-bottom: 14px;
      }

      .similar {
        margin-top: 60px;
      }

      .similar-title {
        margin: 0 0 20px;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        font-size: 18px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
      }

      .card {
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 18px;
        padding: 14px;
        display: grid;
        gap: 10px;
        background: rgba(255, 255, 255, 0.02);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        color: inherit;
        text-decoration: none;
      }

      .thumb {
        width: 100%;
        aspect-ratio: 1 / 1;
        border-radius: 12px;
        background: linear-gradient(135deg, #1a1a1a, #111);
        position: relative;
        overflow: hidden;
        display: grid;
        place-items: center;
      }

      .thumb::after {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.25);
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .view-button {
        position: absolute;
        z-index: 2;
        padding: 8px 14px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        background: rgba(0, 0, 0, 0.5);
        color: var(--text-color, #f8f3ef);
        letter-spacing: 0.16em;
        text-transform: uppercase;
        font-size: 11px;
        opacity: 0;
        transition: opacity 0.2s ease;
        text-decoration: none;
      }

      @media (max-width: 900px) {
        .page {
          padding: 24px 18px 60px;
        }

        .page-header {
          flex-wrap: wrap;
          gap: 12px;
        }

        .brand {
          font-size: 28px;
        }

        .product {
          grid-template-columns: 1fr;
        }

        .actions {
          flex-wrap: wrap;
        }

        .add {
          flex: 1;
          min-width: 160px;
        }

        .wish {
          width: 44px;
          height: 44px;
        }

        .grid {
          grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        }

        .similar-title {
          text-align: center;
        }
      }

      @media (max-width: 600px) {
        .gallery-arrow {
          width: 30px;
          height: 30px;
        }

        .title {
          font-size: 24px;
        }
      }

      .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
      }

      .card:hover .thumb::after {
        opacity: 1;
      }

      .card:hover .view-button {
        opacity: 1;
      }

      .card-title {
        letter-spacing: 0.12em;
        text-transform: uppercase;
      }

      .card-price {
        opacity: 0.7;
      }

      .footer {
        margin-top: 80px;
        padding: 40px 0;
        border-top: 1px solid rgba(0, 0, 0, 0.08);
        color: #1a1a1a;
        background: #f4f4f4;
      }

      .footer-inner {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 24px;
        display: flex;
        justify-content: space-between;
        gap: 24px;
        flex-wrap: wrap;
      }

      .footer-brand {
        font-family: "Ballet", "Great Vibes", cursive;
        font-size: 28px;
        letter-spacing: 0.04em;
      }

      .footer-text {
        font-family: system-ui, -apple-system, sans-serif;
        font-size: 13px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
      }

      @media (max-width: 900px) {
        .product {
          grid-template-columns: 1fr;
        }
      }
    </style>
    
</head>
  <body>
    <div class="page">
      <header class="page-header">
        <button class="back-button" id="backButton" aria-label="Back">←</button>
        <a class="brand" href="index.html" data-i18n="brand">Yokatta</a>
        <div class="lang">
          <button data-lang="en">EN</button>
          <button data-lang="ru">RU</button>
        </div>
      </header>

      <div class="product">
        <div class="gallery" id="gallery">
          <img id="galleryImage" src="bag.jpg" alt="" />
          <button class="gallery-arrow left" id="prevImage">←</button>
          <button class="gallery-arrow right" id="nextImage">→</button>
        </div>
        <div>
          <h1 class="title" data-i18n="title">Product name</h1>
          <div class="price">$0</div>
          <div class="color" data-i18n="color">Color: Black</div>
          <div class="sizes" id="sizes">
            <button class="size" data-size="XS">XS</button>
            <button class="size" data-size="S">S</button>
            <button class="size" data-size="M">M</button>
            <button class="size disabled" data-size="L">L</button>
            <button class="size" data-size="XL">XL</button>
          </div>
          <div class="actions">
            <button class="add" id="addToCart" data-i18n="add">
              Add to cart
            </button>
            <button class="wish">
              <img src="image copy 2.png" alt="Wishlist" />
            </button>
          </div>

          <div class="accordion">
            <div class="accordion-item">
              <button class="accordion-toggle" data-i18n="accDescription">
                Description <span>+</span>
              </button>
              <div class="accordion-content" data-i18n="accDescriptionText">
                Minimal premium description placeholder for the item.
              </div>
            </div>
            <div class="accordion-item">
              <button class="accordion-toggle" data-i18n="accFit">
                Fit <span>+</span>
              </button>
              <div class="accordion-content" data-i18n="accFitText">
                Regular fit with a clean silhouette and soft structure.
              </div>
            </div>
            <div class="accordion-item">
              <button class="accordion-toggle" data-i18n="accMaterials">
                Materials <span>+</span>
              </button>
              <div class="accordion-content" data-i18n="accMaterialsText">
                Premium cotton blend designed for comfort and shape.
              </div>
            </div>
            <div class="accordion-item">
              <button class="accordion-toggle" data-i18n="accCare">
                Care guide <span>+</span>
              </button>
              <div class="accordion-content" data-i18n="accCareText">
                Wash cold, do not bleach, dry flat.
              </div>
            </div>
            <div class="accordion-item">
              <button class="accordion-toggle" data-i18n="accDelivery">
                Delivery & payment <span>+</span>
              </button>
              <div class="accordion-content" data-i18n="accDeliveryText">
                Shipping and payment details will appear here.
              </div>
            </div>
          </div>
        </div>
      </div>

      <section class="similar">
        <h2 class="similar-title" data-i18n="similar">Similar products</h2>
        <div class="grid">
          <a class="card" href="product.html">
            <div class="thumb">
              <span class="view-button" data-i18n="view">View</span>
            </div>
            <div class="card-title">Product</div>
            <div class="card-price">$0</div>
          </a>
          <a class="card" href="product.html">
            <div class="thumb">
              <span class="view-button" data-i18n="view">View</span>
            </div>
            <div class="card-title">Product</div>
            <div class="card-price">$0</div>
          </a>
          <a class="card" href="product.html">
            <div class="thumb">
              <span class="view-button" data-i18n="view">View</span>
            </div>
            <div class="card-title">Product</div>
            <div class="card-price">$0</div>
          </a>
          <a class="card" href="product.html">
            <div class="thumb">
              <span class="view-button" data-i18n="view">View</span>
            </div>
            <div class="card-title">Product</div>
            <div class="card-price">$0</div>
          </a>
        </div>
      </section>
    </div>

    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-brand">Yokatta</div>
        <div class="footer-text">hello@yokatta.com</div>
        <div class="footer-text">Instagram / TikTok</div>
        <div class="footer-text">© 2026 Yokatta</div>
      </div>
    </footer>

    <script src="gradient.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      const SUPABASE_URL = "https://kbguphxloslhdcpbxqub.supabase.co";
      const SUPABASE_KEY = "sb_publishable__Ve_OcWmEs8Hpns4PA-Teg_6gb7S-iO";
      const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

      const translations = {
        en: {
          brand: "Yokatta",
          title: "Product name",
          add: "Add to cart",
          color: "Color: Black",
          similar: "Similar products",
          view: "View",
          accDescription: "Description",
          accDescriptionText: "Minimal premium description placeholder for the item.",
          accFit: "Fit",
          accFitText: "Regular fit with a clean silhouette and soft structure.",
          accMaterials: "Materials",
          accMaterialsText: "Premium cotton blend designed for comfort and shape.",
          accCare: "Care guide",
          accCareText: "Wash cold, do not bleach, dry flat.",
          accDelivery: "Delivery & payment",
          accDeliveryText: "Shipping and payment details will appear here.",
        },
        ru: {
          brand: "Yokatta",
          title: "Название товара",
          add: "В корзину",
          color: "Цвет: Чёрный",
          similar: "Похожие товары",
          view: "Смотреть",
          accDescription: "Описание",
          accDescriptionText: "Минималистичное описание премиального изделия.",
          accFit: "Посадка",
          accFitText: "Регулярная посадка с чистым силуэтом.",
          accMaterials: "Материалы",
          accMaterialsText: "Премиальный хлопковый микс для комфорта и формы.",
          accCare: "Уход",
          accCareText: "Стирка при низкой температуре, без отбеливателя.",
          accDelivery: "Доставка и оплата",
          accDeliveryText: "Детали доставки и оплаты появятся здесь.",
        },
      };

      let currentLang = localStorage.getItem("lang") || "en";
      const applyLanguage = (lang) => {
        currentLang = lang;
        const strings = translations[lang] || translations.en;
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const key = el.getAttribute("data-i18n");
          if (strings[key]) el.textContent = strings[key];
        });
        document.querySelectorAll(".lang button").forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.lang === lang);
        });
        localStorage.setItem("lang", lang);
        updateProductUI();
      };

      document.querySelectorAll(".lang button").forEach((btn) => {
        btn.addEventListener("click", () => applyLanguage(btn.dataset.lang));
      });

      document.getElementById("backButton").addEventListener("click", () => history.back());

      const galleryImage = document.getElementById("galleryImage");
      const titleEl = document.querySelector(".title");
      const priceEl = document.querySelector(".price");
      const colorEl = document.querySelector(".color");
      const sizeButtons = Array.from(document.querySelectorAll(".size"));
      const addToCart = document.getElementById("addToCart");
      const wishButton = document.querySelector(".wish");
      let images = ["bag.jpg", "denim.jpg", "hoodies.jpg"];
      let currentIndex = 0;

      const loadProductFromStorage = () => {
        const params = new URLSearchParams(window.location.search);
        const productId = params.get("productId");
        if (productId) {
          try {
            const catalogRaw = localStorage.getItem("catalogProducts");
            if (catalogRaw) {
              const list = JSON.parse(catalogRaw);
              const match = list.find((item) => item.id === productId);
              if (match) return match;
            }
          } catch (err) {}
        }
        try {
          const selected = localStorage.getItem("selectedProduct");
          if (selected) return JSON.parse(selected);
        } catch (err) {}
        return null;
      };

      const productData =
        loadProductFromStorage() || {
          id: "product-001",
          name: "Yokatta Essential",
          price: 180,
          color: "Black",
          category: "Outerwear",
          sizes: ["XS", "S", "M", "L"],
        };

      const categoryImages = {
        "T-shirts": ["tshirts.jpg"],
        Hoodies: ["hoodies.jpg"],
        Jeans: ["denim.jpg"],
        Shorts: ["denim.jpg"],
        Outerwear: ["hoodies.jpg", "denim.jpg"],
        Accessories: ["bag.jpg", "sunglasses.jpeg", "shoes.png"],
      };

      const updateProductUI = () => {
        if (titleEl) titleEl.textContent = productData.name;
        if (priceEl) priceEl.textContent = `$${productData.price}`;
        if (colorEl) {
          colorEl.textContent =
            currentLang === "ru"
              ? `Цвет: ${productData.color}`
              : `Color: ${productData.color}`;
        }

        const availableSizes = productData.sizes || [];
        sizeButtons.forEach((btn) => {
          const size = btn.dataset.size;
          const isAvailable = availableSizes.includes(size);
          btn.classList.toggle("disabled", !isAvailable);
          btn.classList.remove("active");
        });
        addToCart.classList.remove("enabled");

        images = categoryImages[productData.category] || images;
        currentIndex = 0;
        if (galleryImage) galleryImage.src = images[currentIndex];
      };

      const bindSizeButtons = () => {
        sizeButtons.forEach((btn) => {
          if (btn.dataset.bound) return;
          btn.dataset.bound = "true";
          btn.addEventListener("click", () => {
            if (btn.classList.contains("disabled")) return;
            sizeButtons.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            addToCart.classList.add("enabled");
          });
        });
      };

      document.getElementById("prevImage").addEventListener("click", () => {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        galleryImage.src = images[currentIndex];
      });
      document.getElementById("nextImage").addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % images.length;
        galleryImage.src = images[currentIndex];
      });

      addToCart.addEventListener("click", async () => {
        if (!addToCart.classList.contains("enabled")) return;
        const { data } = await supabaseClient.auth.getSession();
        const session = data.session;
        if (!session) {
          alert("Please login to add to cart.");
          return;
        }
        const selected = document.querySelector(".size.active");
        const size = selected ? selected.dataset.size : null;
        await supabaseClient.from("cart_items").insert({
          user_id: session.user.id,
          product_id: productData.id,
          name: productData.name,
          price: productData.price,
          size,
          color: productData.color,
          category: productData.category,
          quantity: 1,
        });
        alert("Added to cart.");
      });

      wishButton.addEventListener("click", async () => {
        const { data } = await supabaseClient.auth.getSession();
        const session = data.session;
        if (!session) {
          alert("Please login to add to wishlist.");
          return;
        }
        await supabaseClient.from("wishlist_items").insert({
          user_id: session.user.id,
          product_id: productData.id,
          name: productData.name,
          price: productData.price,
          color: productData.color,
          category: productData.category,
        });
        alert("Added to wishlist.");
      });

      document.querySelectorAll(".accordion-toggle").forEach((toggle) => {
        toggle.addEventListener("click", () => {
          toggle.parentElement.classList.toggle("open");
        });
      });

      bindSizeButtons();
      applyLanguage(currentLang);
    </script>
  </body>
</html>
